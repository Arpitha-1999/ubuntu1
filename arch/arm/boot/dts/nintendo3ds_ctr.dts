/dts-v1/;
/ {
	model = "Nintendo 3DS (CTR)";
	compatible = "nintendo3ds,ctr";
	interrupt-parent = <&gic>;
	#address-cells = <1>;
	#size-cells = <1>;

	chosen {
		/* No FB: bootargs = "earlyprintk keep_bootcon fbcon=rotate:1 init=/init"; */

		bootargs = "keep_bootcon fbcon=rotate:1 root=/dev/ram0 rootfstype=ramfs init=init console=tty0";

		#address-cells = <1>;
		#size-cells = <1>;
		ranges;

		framebuffer0: framebuffer@18000000 {
			compatible = "simple-framebuffer";
			reg = <0x18000000 (400*240*3)>;
			width = <240>;
			height = <400>;
			stride = <(240*3)>;
			format = "r8g8b8";
		};

		/*framebuffer1: framebuffer@18119400 {
			compatible = "simple-framebuffer";
			reg = <0x18119400 (320*240*3)>;
			width = <240>;
			height = <320>;
			stride = <(240*3)>;
			format = "r8g8b8";
		};*/

	};

	aliases {
		i2c1 = &i2c1;
		i2c2 = &i2c2;
		i2c3 = &i2c3;
	};

	memory {
		device_type = "memory";

		/* 128 MiB FCRAM memory @ 0x20000000 */
		reg = <0x20000000 0x08000000>;
	};

	cpus {
		#address-cells = <1>;
		#size-cells = <0>;

		cpu@0 {
			device_type = "cpu";
			compatible = "arm,arm11mpcore";
			reg = <0>;
		};
	};

	n3ds_input0: input@10146000 {
		compatible = "nintendo3ds-input";
	};

	i2c1: i2c@10161000 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "nintendo3ds-i2c";
		reg = <0x10161000 0x04>;
	};

	i2c2: i2c@10144000 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "nintendo3ds-i2c";
		reg = <0x10144000 0x04>;
	};

	i2c3: i2c@10148000 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "nintendo3ds-i2c";
		reg = <0x10148000 0x04>;

		/*rtc@30 {
			compatible = "nintendo3ds-rtc";
			reg = <0x30>;
		};*/
	};

	nintendo3ds_refclk144mhz: refclk144mkhz {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <144000000>;
		clock-output-names = "nintendo3ds:refclk144khz";
	};

	twd-timer@17E00600 {
		compatible = "arm,arm11mp-twd-timer";
		reg = <0x17E00600 0x20>;
		interrupts = <1 13 0xf01>;
		clocks = <&nintendo3ds_refclk144mhz>;
	};

	twd-watchdog@17E00620 {
		compatible = "arm,arm11mp-twd-wdt";
		reg = <0x17E00620 0x20>;
		interrupts = <1 14 0xf01>;
	};

	gic: interrupt-controller@17E01000 {
		compatible = "arm,arm11mp-gic";
		#interrupt-cells = <3>;
		#address-cells = <1>;
		interrupt-controller;
		arm,routable-irqs = <128>;
		reg = <0x17E01000 0x1000>, //GIC distributor register
		      <0x17E00100 0x100>;  //GIC cpu interface register
	};

} ;
